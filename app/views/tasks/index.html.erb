<div class="container">
  <div class="page-header">
    <h1>Tasks</h1>
    <br>
    <br>
  </div>

</div>
<div class="container">
  <%= form_for "", url: tasks_path, role: "search", method: :get do %>
    <%= select_tag :search,  options_for_select(Task.available_states), {:include_blank => 'All'} %>
    <%= submit_tag 'Filter' %>
  <% end %>

  <table class="table table-striped">
 
    <thead>
      <tr>
        <th>Title</th>
        <th>Details</th>
        <th>Assignee</th>
        <th>Reviewer</th>
        <th>Assigned by</th>
        <th>Status</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @tasks.each do |task| %>
        <tr class="<%= cycle('list_line_odd', 'list_line_even') %>">
          <td><%= task.title %></td>
          <td><%= task.details %></td>
          <td><%= task.assignee_user.name %></td>
          <td><%= task.reviewer_user.name %></td>
          <td><%= task.created_by_user.name %></td>
          <td><%= get_status(task) %></td>
          <td><%= link_to 'Show', task %></td>
          <td><%if can? :update, task %><%= link_to 'Edit', edit_task_path(task) %><%end%></td>
          <td><%if can? :destroy, task %><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %><%end%></td>
        </tr>
      <% end %>   
    </tbody>
  </table>
  <%= will_paginate @tasks, renderer: BootstrapPagination::Rails%>
  <br>

  <%= link_to 'New Task', new_task_path %>
</div>